define("text",["module"],function(n){"use strict";var e,r,t,i,a,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],s=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,u="undefined"!=typeof location&&location.href,c=u&&location.protocol&&location.protocol.replace(/\:/,""),p=u&&location.hostname,d=u&&(location.port||void 0),f={},g=n.config&&n.config()||{};return e={version:"2.0.10",strip:function(n){if(n){n=n.replace(s,"");var e=n.match(l);e&&(n=e[1])}else n="";return n},jsEscape:function(n){return n.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:g.createXhr||function(){var n,e,r;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(e=0;3>e;e+=1){r=o[e];try{n=new ActiveXObject(r)}catch(t){}if(n){o=[r];break}}return n},parseName:function(n){var e,r,t,i=!1,a=n.indexOf("."),o=0===n.indexOf("./")||0===n.indexOf("../");return-1!==a&&(!o||a>1)?(e=n.substring(0,a),r=n.substring(a+1,n.length)):e=n,t=r||e,a=t.indexOf("!"),-1!==a&&(i="strip"===t.substring(a+1),t=t.substring(0,a),r?r=t:e=t),{moduleName:e,ext:r,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(n,r,t,i){var a,o,s,l=e.xdRegExp.exec(n);return l?(a=l[2],o=l[3],o=o.split(":"),s=o[1],o=o[0],!(a&&a!==r||o&&o.toLowerCase()!==t.toLowerCase()||(s||o)&&s!==i)):!0},finishLoad:function(n,r,t,i){t=r?e.strip(t):t,g.isBuild&&(f[n]=t),i(t)},load:function(n,r,t,i){if(i.isBuild&&!i.inlineText)return void t();g.isBuild=i.isBuild;var a=e.parseName(n),o=a.moduleName+(a.ext?"."+a.ext:""),s=r.toUrl(o),l=g.useXhr||e.useXhr;return 0===s.indexOf("empty:")?void t():void(!u||l(s,c,p,d)?e.get(s,function(r){e.finishLoad(n,a.strip,r,t)},function(n){t.error&&t.error(n)}):r([o],function(n){e.finishLoad(a.moduleName+"."+a.ext,a.strip,n,t)}))},write:function(n,r,t,i){if(f.hasOwnProperty(r)){var a=e.jsEscape(f[r]);t.asModule(n+"!"+r,"define(function () { return '"+a+"';});\n")}},writeFile:function(n,r,t,i,a){var o=e.parseName(r),s=o.ext?"."+o.ext:"",l=o.moduleName+s,u=t.toUrl(o.moduleName+s)+".js";e.load(l,t,function(r){var t=function(n){return i(u,n)};t.asModule=function(n,e){return i.asModule(n,u,e)},e.write(n,l,t,a)},a)}},"node"===g.env||!g.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(r=require.nodeRequire("fs"),e.get=function(n,e,t){try{var i=r.readFileSync(n,"utf8");0===i.indexOf("\ufeff")&&(i=i.substring(1)),e(i)}catch(a){t(a)}}):"xhr"===g.env||!g.env&&e.createXhr()?e.get=function(n,r,t,i){var a,o=e.createXhr();if(o.open("GET",n,!0),i)for(a in i)i.hasOwnProperty(a)&&o.setRequestHeader(a.toLowerCase(),i[a]);g.onXhr&&g.onXhr(o,n),o.onreadystatechange=function(e){var i,a;4===o.readyState&&(i=o.status,i>399&&600>i?(a=new Error(n+" HTTP status: "+i),a.xhr=o,t(a)):r(o.responseText),g.onXhrComplete&&g.onXhrComplete(o,n))},o.send(null)}:"rhino"===g.env||!g.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?e.get=function(n,e){var r,t,i="utf-8",a=new java.io.File(n),o=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(a),i)),l="";try{for(r=new java.lang.StringBuffer,t=s.readLine(),t&&t.length()&&65279===t.charAt(0)&&(t=t.substring(1)),null!==t&&r.append(t);null!==(t=s.readLine());)r.append(o),r.append(t);l=String(r.toString())}finally{s.close()}e(l)}:("xpconnect"===g.env||!g.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(t=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),a="@mozilla.org/windows-registry-key;1"in t,e.get=function(n,e){var r,o,s,l={};a&&(n=n.replace(/\//g,"\\")),s=new FileUtils.File(n);try{r=t["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),r.init(s,1,0,!1),o=t["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(r,"utf-8",r.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(r.available(),l),o.close(),r.close(),e(l.value)}catch(u){throw new Error((s&&s.path||"")+": "+u)}}),e}),define("text!SpecialChars.json",[],function(){return'[\n    "&#33",\n    "&#35",\n    "&#36",\n    "&#37",\n    "&#39",\n    "&#40",\n    "&#41",\n    "&#42",\n    "&#43",\n    "&#44",\n    "&#45",\n    "&#46",\n    "&#58",\n    "&#59",\n    "&#61",\n    "&#63",\n    "&#64",\n    "&#91",\n    "&#92",\n    "&#93",\n    "&#94",\n    "&#95",\n    "&#96",\n    "&#123",\n    "&#124",\n    "&#125",\n    "&#126",\n    "&#8226",\n    "&#9679",\n    \n    "&aacute",\n    "&Aacute",\n    "&acirc",\n    "&Acirc",\n    "&acute",\n    "&aelig",\n    "&AElig",\n    "&agrave",\n    "&Agrave",\n    "&alefsym",\n    "&alpha",\n    "&Alpha",\n    "&amp",\n    "&and",\n    "&ang",\n    "&aring",\n    "&Aring",\n    "&asymp",\n    "&atilde",\n    "&Atilde",\n    "&auml",\n    "&Auml",\n    "&bdquo",\n    "&beta",\n    "&Beta",\n    "&brvbar",\n    "&bull",\n    "&cap",\n    "&ccedil",\n    "&Ccedil",\n    "&cedil",\n    "&cent",\n    "&chi",\n    "&Chi",\n    "&circ",\n    "&clubs",\n    "&cong",\n    "&copy",\n    "&crarr",\n    "&cup",\n    "&curren",\n    "&dagger",\n    "&Dagger",\n    "&darr",\n    "&dArr",\n    "&deg",\n    "&delta",\n    "&Delta",\n    "&diams",\n    "&die",\n    "&divide",\n    "&eacute",\n    "&Eacute",\n    "&ecirc",\n    "&Ecirc",\n    "&egrave",\n    "&Egrave",\n    "&empty",\n    "&emsp",\n    "&ensp",\n    "&epsilon",\n    "&Epsilon",\n    "&equiv",\n    "&eta",\n    "&Eta",\n    "&eth",\n    "&ETH",\n    "&euml",\n    "&Euml",\n    "&euro",\n    "&exist",\n    "&forall",\n    "&frac12",\n    "&frac14",\n    "&frac34",\n    "&frasl",\n    "&gamma",\n    "&Gamma",\n    "&ge",\n    "&gt",\n    "&harr",\n    "&hArr",\n    "&hearts",\n    "&hellip",\n    "&iacute",\n    "&Iacute",\n    "&icirc",\n    "&Icirc",\n    "&iexcl",\n    "&igrave",\n    "&Igrave",\n    "&image",\n    "&infin",\n    "&int",\n    "&iota",\n    "&Iota",\n    "&iquest",\n    "&isin",\n    "&iuml",\n    "&Iuml",\n    "&kappa",\n    "&Kappa",\n    "&lambda",\n    "&Lambda",\n    "&lang",\n    "&laquo",\n    "&larr",\n    "&lArr",\n    "&lceil",\n    "&ldquo",\n    "&le",\n    "&lfloor",\n    "&lowast",\n    "&loz",\n    "&lrm",\n    "&lsaquo",\n    "&lsquo",\n    "&lt",\n    "&macr",\n    "&mdash",\n    "&micro",\n    "&middot",\n    "&minus",\n    "&mu",\n    "&Mu",\n    "&nabla",\n    "&nbsp",\n    "&ndash",\n    "&ne",\n    "&ni",\n    "&not",\n    "&notin",\n    "&nsub",\n    "&ntilde",\n    "&Ntilde",\n    "&nu",\n    "&Nu",\n    "&oacute",\n    "&Oacute",\n    "&ocirc",\n    "&Ocirc",\n    "&ograve",\n    "&Ograve",\n    "&oline",\n    "&omega",\n    "&Omega",\n    "&omicron",\n    "&Omicron",\n    "&oplus",\n    "&or",\n    "&ordf",\n    "&ordm",\n    "&oslash",\n    "&Oslash",\n    "&otilde",\n    "&Otilde",\n    "&otimes",\n    "&ouml",\n    "&Ouml",\n    "&para",\n    "&part",\n    "&permil",\n    "&perp",\n    "&phi",\n    "&Phi",\n    "&pi",\n    "&Pi",\n    "&piv",\n    "&plusmn",\n    "&pound",\n    "&prime",\n    "&Prime",\n    "&prod",\n    "&prop",\n    "&psi",\n    "&Psi",\n    "&quot",\n    "&radic",\n    "&rang",\n    "&raquo",\n    "&rarr",\n    "&rArr",\n    "&rceil",\n    "&rdquo",\n    "&real",\n    "&reg",\n    "&rfloor",\n    "&rho",\n    "&Rho",\n    "&rlm",\n    "&rsaquo",\n    "&rsquo",\n    "&sbquo",\n    "&Scaron",\n    "&scaron",\n    "&sdot",\n    "&sect",\n    "&shy",\n    "&sigma",\n    "&Sigma",\n    "&sim",\n    "&spades",\n    "&sub",\n    "&sube",\n    "&sum",\n    "&sup",\n    "&supe",\n    "&sup1",\n    "&sup2",\n    "&sup3",\n    "&szlig",\n    "&tau",\n    "&Tau",\n    "&there4",\n    "&theta",\n    "&Theta",\n    "&thetasym",\n    "&thinsp",\n    "&thorn",\n    "&THORN",\n    "&times",\n    "&tilde",\n    "&trade",\n    "&uacute",\n    "&Uacute",\n    "&uarr",\n    "&uArr",\n    "&ucirc",\n    "&Ucirc",\n    "&ugrave",\n    "&Ugrave",\n    "&uml",\n    "&upsih",\n    "&upsilon",\n    "&Upsilon",\n    "&uuml",\n    "&Uuml",\n    "&weierp",\n    "&xi",\n    "&Xi",\n    "&yacute",\n    "&Yacute",\n    "&yen",\n    "&yuml",\n    "&zeta",\n    "&Zeta",\n    "&zwnj"\n]'}),define("main",["require","exports","module","text!SpecialChars.json"],function(n,e,r){"use strict";function t(n){return n.replace("&","&amp;").replace("#","&#35;")}function i(n){return n.replace("&amp;","&").replace("&#35;","#")}function a(){this.primaryTriggerKeys="&ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz#0123456789",this.currentQuery=""}var o,s=brackets.getModule("utils/AppInit"),l=brackets.getModule("editor/CodeHintManager"),u=brackets.getModule("utils/ExtensionUtils"),c=brackets.getModule("language/HTMLUtils"),p=brackets.getModule("preferences/PreferencesManager"),d=brackets.getModule("strings"),f=n("text!SpecialChars.json");p.definePreference("codehint.SpecialCharHints","boolean",!0,{description:d.DESCRIPTION_SPECIAL_CHAR_HINTS}),a.prototype.hasHints=function(n,e){return this.editor=n,null!==this._getQuery()},a.prototype.getHints=function(n){var e,r;return null===n||-1!==this.primaryTriggerKeys.indexOf(n)?(this.currentQuery=e=this._getQuery(),r=$.map(o,function(n,r){if(0===n.indexOf(e)){var i=t(n);return i+"; <span class='entity-display-character'>"+n+";</span>"}}).sort(this._internalSort),null!==e&&(e=t(e)),{hints:r,match:e,selectInitial:!0,handleWideResults:!1}):null},a.prototype._internalSort=function(n,e){if(n=i(n.slice(0,n.indexOf(" "))).toLowerCase(),e=i(e.slice(0,e.indexOf(" "))).toLowerCase(),-1!==n.indexOf("#")&&-1!==e.indexOf("#")){var r=parseInt(n.slice(n.indexOf("#")+1,n.length-1),10),t=parseInt(e.slice(e.indexOf("#")+1,e.length-1),10);return r-t}return n.localeCompare(e)},a.prototype._getQuery=function(){var n,e,r,t,i=this.editor.getCursorPos();return""!==c.getTagInfo(this.editor,i).tagName?null:(e=this.editor.document.getRange({line:i.line,ch:0},i),r=e.lastIndexOf("&"),t=e.lastIndexOf(";"),-1===r||t>r?null:n=this.editor.document.getRange({line:i.line,ch:r},i))},a.prototype.insertHint=function(n){var e,r,t,a,o={line:-1,ch:-1},s={line:-1,ch:-1},l=this.editor.getCursorPos(),u=this.editor.document.getLine(l.line);return s.line=o.line=l.line,o.ch=l.ch-this.currentQuery.length,e=u.slice(l.ch),r=e.indexOf("&"),t=e.indexOf(";"),s.ch=o.ch+this.currentQuery.length,-1!==t&&(-1===r||r>t)&&(e=e.slice(0,t),a=e.match(/^(#?[0-9]+)|([a-zA-Z]+)$/),a&&a.length>0&&0===a.index&&a[0].length===e.length&&(s.ch=u.indexOf(";",o.ch)+1)),n=n.slice(0,n.indexOf(" ")),n=i(n),o.ch!==s.ch?this.editor.document.replaceRange(n,o,s):this.editor.document.replaceRange(n,o),!1},s.appReady(function(){u.loadStyleSheet(r,"styles.css"),o=JSON.parse(f);var n=new a;l.registerHintProvider(n,["html"],1)}),e.SpecialCharHints=a});