define("main",["require","exports","module"],function(e,n,t){"use strict";function r(e,n){var t=e._codeMirror.getTokenAt(n,!0);return/\S/.test(t.string)&&"."!==t.string||(t=e._codeMirror.getTokenAt({line:n.line,ch:n.ch+1},!0)),"variable"!==t.type&&"variable-2"!==t.type&&"property"!==t.type?{functionName:null,reason:f.ERROR_JSQUICKEDIT_FUNCTIONNOTFOUND}:{functionName:t.string,reason:null}}function a(e){function n(e){return!s.getLanguageForPath(e.fullPath).isBinary()}var t=new $.Deferred;return d.markStart(d.JAVASCRIPT_FIND_FUNCTION),I.getAllFiles(n).done(function(n){c.findMatchingFunctions(e,n).done(function(e){d.addMeasurement(d.JAVASCRIPT_FIND_FUNCTION),t.resolve(e)}).fail(function(){d.finalizeMeasurement(d.JAVASCRIPT_FIND_FUNCTION),t.reject()})}).fail(function(){t.reject()}),t.promise()}function i(e,n){var t=brackets._jsCodeHintsHelper;if(null===t)return null;var r=new $.Deferred;d.markStart(d.JAVASCRIPT_INLINE_CREATE);var i=t();return i.hasOwnProperty("promise")&&i.promise.done(function(t){var i=t.fullPath;if(i){var o=[];o.push({name:t.resultFile,fullPath:i}),c.findMatchingFunctions(n,o,!0).done(function(n){if(n&&n.length>0){var t=new l(n);t.load(e),d.addMeasurement(d.JAVASCRIPT_INLINE_CREATE),r.resolve(t)}else d.addMeasurement(d.JAVASCRIPT_INLINE_CREATE),r.reject()}).fail(function(){d.addMeasurement(d.JAVASCRIPT_INLINE_CREATE),r.reject()})}else a(n).done(function(n){if(n&&n.length>0){var t=new l(n);t.load(e),d.addMeasurement(d.JAVASCRIPT_INLINE_CREATE),r.resolve(t)}else d.addMeasurement(d.JAVASCRIPT_INLINE_CREATE),r.reject()}).fail(function(){d.finalizeMeasurement(d.JAVASCRIPT_INLINE_CREATE),r.reject()})}).fail(function(){d.finalizeMeasurement(d.JAVASCRIPT_INLINE_CREATE),r.reject()}),r.promise()}function o(e,n){if("javascript"!==e.getModeForSelection())return null;var t=e.getSelection();if(t.start.line!==t.end.line)return null;var a=r(e,t.start);return a.functionName?i(e,a.functionName):a.reason||null}var l=brackets.getModule("editor/MultiRangeInlineEditor").MultiRangeInlineEditor,u=brackets.getModule("editor/EditorManager"),c=brackets.getModule("language/JSUtils"),s=brackets.getModule("language/LanguageManager"),d=brackets.getModule("utils/PerfUtils"),I=brackets.getModule("project/ProjectManager"),f=brackets.getModule("strings");u.registerInlineEditProvider(o),d.createPerfMeasurement("JAVASCRIPT_INLINE_CREATE","JavaScript Inline Editor Creation"),d.createPerfMeasurement("JAVASCRIPT_FIND_FUNCTION","JavaScript Find Function"),n.javaScriptFunctionProvider=o,n._createInlineEditor=i,n._findInProject=a});