(function(){"use strict";var nlsRegExp=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;function addPart(locale,master,needed,toLoad,prefix,suffix){if(master[locale]){needed.push(locale);if(master[locale]===true||master[locale]===1){toLoad.push(prefix+locale+"/"+suffix)}}}function addIfExists(req,locale,toLoad,prefix,suffix){var fullName=prefix+locale+"/"+suffix;if(require._fileExists(req.toUrl(fullName+".js"))){toLoad.push(fullName)}}function mixin(target,source,force){var prop;for(prop in source){if(source.hasOwnProperty(prop)&&(!target.hasOwnProperty(prop)||force)){target[prop]=source[prop]}else if(typeof source[prop]==="object"){mixin(target[prop],source[prop],force)}}}define(["module"],function(module){var masterConfig=module.config?module.config():{};return{version:"2.0.1+",load:function(name,req,onLoad,config){config=config||{};if(config.locale){masterConfig.locale=config.locale}var masterName,match=nlsRegExp.exec(name),prefix=match[1],locale=match[4],suffix=match[5],parts=locale.split("-"),toLoad=[],value={},i,part,current="";if(match[5]){prefix=match[1];masterName=prefix+suffix}else{masterName=name;suffix=match[4];locale=masterConfig.locale;if(!locale){locale=masterConfig.locale=typeof navigator==="undefined"?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()}parts=locale.split("-")}if(config.isBuild){toLoad.push(masterName);addIfExists(req,"root",toLoad,prefix,suffix);for(i=0;i<parts.length;i++){part=parts[i];current+=(current?"-":"")+part;addIfExists(req,current,toLoad,prefix,suffix)}req(toLoad,function(){onLoad()})}else{req([masterName],function(master){var needed=[],part;addPart("root",master,needed,toLoad,prefix,suffix);for(i=0;i<parts.length;i++){part=parts[i];current+=(current?"-":"")+part;addPart(current,master,needed,toLoad,prefix,suffix)}req(toLoad,function(){var i,partBundle,part;for(i=needed.length-1;i>-1&&needed[i];i--){part=needed[i];partBundle=master[part];if(partBundle===true||partBundle===1){partBundle=req(prefix+part+"/"+suffix)}mixin(value,partBundle)}onLoad(value)})})}}}})})();